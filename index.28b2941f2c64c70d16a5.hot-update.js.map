{"version":3,"file":"index.28b2941f2c64c70d16a5.hot-update.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;;;;;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AADA;AAGA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAzBA;AAJA;AAoCA;;AAEA;;;;;;;;;;;;;;;;;;;ACvEA;AAQA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC1DA","sources":["webpack://NeedForDrive-Second-Iteration/./src/pages/Edit/Edit.tsx","webpack://NeedForDrive-Second-Iteration/./src/store/Cars/thunks.ts","webpack://NeedForDrive-Second-Iteration/webpack/runtime/getFullHash"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Route, Routes } from 'react-router-dom';\nimport { Toast } from 'react-bootstrap';\nimport CarEdit from './components/CarEdit/CarEdit';\nimport OrderStatusEdit from './components/OrderStatusEdit/OrderStatusEdit';\nimport CategoryEdit from './components/CategoryEdit/CategoryEdit';\nimport PointEdit from './components/PointEdit/PointEdit';\nimport CityEdit from './components/CityEdit/CityEdit';\nimport RateEdit from './components/RateEdit/RateEdit';\nimport RateTypesEdit from './components/RateTypesEdit/RateTypesEdit';\nimport EditRouter from './components/EditRouter/EditRouter';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { ErrorHandlerState } from '../../types/Error';\nimport { Dispatcher } from '../../types/store';\nimport { clearSuccessAlert } from '../../store/ErrorProvider/actions';\n\nconst Edit = (): React.ReactElement => {\n  const dispatch = useDispatch<Dispatcher>();\n  const [show, setShow] = useState<boolean>(false);\n  const [alertMessage, setAlertMessage] = useState<string | null>(null);\n\n  const { successAlert } = useSelector<{\n    errorHandler: ErrorHandlerState;\n  }, ErrorHandlerState>((state) => state.errorHandler);\n\n  useEffect(() => {\n    if (successAlert) {\n      setAlertMessage(successAlert);\n      setShow(true);\n    }\n    dispatch(clearSuccessAlert());\n  }, [successAlert]);\n\n  return (\n    <>\n      <Toast onClose={() => setShow(false)} show={show} delay={3000} autohide>\n        <Toast.Body>{`Успех! ${alertMessage}`}</Toast.Body>\n      </Toast>\n      <Routes>\n        <Route path=\"car\" element={<EditRouter />}>\n          <Route path=\"car\" element={<CarEdit />} />\n          <Route path=\":carId\" element={<CarEdit />} />\n        </Route>\n        <Route path=\"order-status\" element={<EditRouter />}>\n          <Route path=\"order-status\" element={<OrderStatusEdit />} />\n          <Route path=\":orderStatusId\" element={<OrderStatusEdit />} />\n        </Route>\n        <Route path=\"category\" element={<EditRouter />}>\n          <Route path=\"category\" element={<CategoryEdit />} />\n          <Route path=\":categoryId\" element={<CategoryEdit />} />\n        </Route>\n        <Route path=\"point\" element={<EditRouter />}>\n          <Route path=\"point\" element={<PointEdit />} />\n          <Route path=\":pointId\" element={<PointEdit />} />\n        </Route>\n        <Route path=\"city\" element={<EditRouter />}>\n          <Route path=\"city\" element={<CityEdit />} />\n          <Route path=\":cityId\" element={<CityEdit />} />\n        </Route>\n        <Route path=\"rate\" element={<EditRouter />}>\n          <Route path=\"rate\" element={<RateEdit />} />\n          <Route path=\":rateId\" element={<RateEdit />} />\n        </Route>\n        <Route path=\"rate-types\" element={<EditRouter />}>\n          <Route path=\"rate-types\" element={<RateTypesEdit />} />\n          <Route path=\":rateTypesId\" element={<RateTypesEdit />} />\n        </Route>\n      </Routes>\n    </>\n  );\n};\n\nexport default Edit;\n","import { ThunkResult } from '../../types/thunk';\nimport {\n  requestCar,\n  requestCarError,\n  requestCars,\n  requestCarsError,\n  requestCarsSuccess, requestCarSuccess, uploadCar, uploadCarError, uploadCarSuccess\n} from './actions';\nimport { CarObject, CarsAxiosConfig } from '../../types/Cars';\nimport { addSuccessAlert, addToErrorHandler } from '../ErrorProvider/actions';\n\nexport const fetchCars = (config: CarsAxiosConfig): ThunkResult => async (dispatch, getState, { services }) => {\n  try {\n    dispatch(requestCars());\n    const { data } = await services.table.getEntities('car', config);\n    dispatch(requestCarsSuccess(data));\n  } catch (error) {\n    dispatch(requestCarsError(error.response.status));\n    dispatch(addToErrorHandler(error.response.status));\n  }\n};\n\nexport const fetchCar = (id): ThunkResult => async (dispatch, getState, { services }) => {\n  try {\n    dispatch(requestCar());\n    const { data } = await services.table.getEntities('car', {}, id);\n    dispatch(requestCarSuccess(data.data));\n  } catch (error) {\n    dispatch(requestCarError(error.response.status));\n    dispatch(addToErrorHandler(error.response.status));\n  }\n};\n\nexport const createCar = (newCar: CarObject): ThunkResult => {\n  return async (dispatch, getState, { services }) => {\n    try {\n      dispatch(uploadCar());\n      const { data } = await services.table.postEntity('car', newCar);\n      dispatch(uploadCarSuccess(data));\n      dispatch(addSuccessAlert('Машина сохранена'));\n    } catch (error) {\n      dispatch(uploadCarError(error.response.status));\n      dispatch(addToErrorHandler(error.response.status));\n    }\n  };\n};\n\nexport const editCar = (car: CarObject, id: string): ThunkResult => {\n  return async (dispatch, getState, { services }) => {\n    try {\n      dispatch(uploadCar());\n      const { data } = await services.table.putEntity('car', car, id);\n      dispatch(uploadCarSuccess(data));\n    } catch (error) {\n      dispatch(uploadCarError(error.response.status));\n      dispatch(addToErrorHandler(error.response.status));\n    }\n  };\n};\n","__webpack_require__.h = () => (\"4670e0feddf9db475055\")"],"names":[],"sourceRoot":""}